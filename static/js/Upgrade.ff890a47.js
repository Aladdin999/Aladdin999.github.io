(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Upgrade"],{5056:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAr0lEQVQ4T+XU0Q2CMBDG8f/JDi6hO4jGGdhRN/AFYQcZwxH0rCSSVkoLlAcT+9rk1+vd1woLL1nY409ALdnJgfrdvuQra80JZSs5m2Twg/GkMBU2SaAPmw0OYbPAEOaAeiWXPVUo6DHMBau2qY2ZVuFDx2AuWJqxrzj70LFYr4cmoD10CuYdSocKt/bqJrR2zmKfifelWJUyBQvGRi+syXjIkXusKns/+S1/H/b74At6MVYVmeOyWQAAAABJRU5ErkJggg=="},"6b1b":function(e,t,n){},"7a35":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("div",{staticClass:"card-box"},[a("div",{staticClass:"card-title"},[a("span",{staticClass:"gradient-title"},[e._v(e._s(e.$t("upgrade.t")))])]),a("div",{staticClass:"card-content"},[e._l(7,(function(t){return[a("input",{key:"r"+t,attrs:{type:"radio",id:"lv"+t,name:"level"},domProps:{checked:t==e.toLevel},on:{click:function(n){return e.changeLevel(t)}}}),a("label",{key:"l"+t,attrs:{for:"lv"+t}},[a("span",[e._v("LV."+e._s(t))]),a("img",{attrs:{src:n("5056"),alt:""}})])]})),Number(e.allow)?a("div",{staticClass:"up-btn theme-btn",on:{click:e.upgradeLevel}},[a("span",[e._v(e._s(e.$t("upgrade.t")))])]):a("div",{staticClass:"up-btn theme-btn",on:{click:e.approve}},[a("span",[e._v(e._s(e.$t("upgrade.approve"))+"ALD")])])],2)]),a("div",{staticClass:"tip-box"},[a("div",{staticClass:"tip-title"},[e._v(e._s(e.$t("upgrade.tt"))+":")]),a("div",{staticClass:"tip"},[a("span",{staticClass:"label"},[e._v("Lv."+e._s(e.toLevel))]),a("span",{staticClass:"content"},[e._v(" "+e._s(e.$t("upgrade.tip"))+" "),a("span",[e._v(e._s(e.needAmount))]),e._v(" ALD ")])])])])},s=[],i=n("1da1"),r=(n("96cf"),n("d3b7"),n("25f0"),n("a9e3"),n("b680"),n("2708")),p=n("c9a8"),u=n("c030"),l=n("9d56"),o=n("ab45"),d={mixins:[r["a"]],data:function(){return{showStatusTip:!1,userLevel:"0",toLevel:"",needAmount:"0.0000",aldToken:null,allow:0,btnStatus:0}},created:function(){this.address&&this.initData()},methods:{initData:function(){this.aldToken=new u["ethers"].Contract(p["Ald"],o,this.$provider).connect(this.$store.state.signer),this.getUserLevel(),this.getAllow()},getUserLevel:function(){var e=this;this.$ald.userLevel(this.address).then((function(t){e.userLevel=t.toString(),e.toLevel=t.toString()}))},getAllow:function(){var e=this;this.aldToken.allowance(this.address,p["aldAddr"]).then((function(t){e.allow=t.toString()}))},approve:function(){var e=this;this.aldToken.approve(p["aldAddr"],l["b"]).then((function(){e.getAllow()}))},changeLevel:function(e){Number(e)<=Number(this.userLevel)?this.toLevel=this.userLevel:(this.toLevel=e,this.getUpgradeLevelAmount(e))},upgradeLevel:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.aldToken.balanceOf(e.address);case 2:if(n=t.sent,!(Number(n.toString()/Math.pow(10,18))<e.needAmount)){t.next=6;break}return e.$toast("余额不足"),t.abrupt("return");case 6:e.$ald.upgradeLevel(e.toLevel,{from:e.address}).then((function(){}));case 7:case"end":return t.stop()}}),t)})))()},getUpgradeLevelAmount:function(e){var t=this;this.$ald.getLevelAmount(e,this.address).then((function(e){t.needAmount=Number(e.toString()/Math.pow(10,18)).toFixed(4)}))}},watch:{address:function(e){e&&this.initData()}}},y=d,c=(n("b282"),n("2877")),m=Object(c["a"])(y,a,s,!1,null,"bdac9c4a",null);t["default"]=m.exports},ab45:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"string","name":"name_","type":"string"},{"internalType":"string","name":"symbol_","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')},b282:function(e,t,n){"use strict";n("6b1b")}}]);
//# sourceMappingURL=Upgrade.ff890a47.js.map